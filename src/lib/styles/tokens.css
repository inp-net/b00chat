/* Constants */
:root {
	color-scheme: light;

	/* Sizing based on golden ratio */
	--golden-ratio: 1.618;

	--size-xxs: calc(1rem / (3 * var(--golden-ratio)));
	--size-xs: calc(1rem / (2 * var(--golden-ratio)));
	--size-sm: calc(1rem / var(--golden-ratio));
	--size-md: 1rem;
	--size-lg: calc(1rem * var(--golden-ratio));
	--size-xl: calc(1rem * 2 * var(--golden-ratio));
	--size-xxl: calc(1rem * 3 * var(--golden-ratio));

	/* Corner radius */
	--corner-radius: 1.25rem;
	--corner-radius-full: 9999px;

	/* Special paddings & gaps */
	--padding-x-icon: 0.61rem;
	--padding-y-icon: 0.485rem;
	--gap-icon: 0.44rem;

	/* System colors */
	--color-success: light-dark(oklch(0.7385 0.2172 143.8), oklch(0.509 0.1472 143.88));
	--color-warning: light-dark(oklch(0.7368 0.156 83.3), oklch(0.681 0.1407 78.49));
	--color-danger: light-dark(oklch(0.6948 0.1954 26.65), oklch(0.555 0.1812 27.87));

	/* Shadows */
	--shadow-surface: 0 -1px 6px 0 rgba(0, 0, 0, 0.2) inset;

	/* -*- Palette generator -*- */

	/* Inspiration: https://www.radix-ui.com/colors */
	/* Why OKLCH? https://evilmartians.com/chronicles/oklch-in-css-why-quit-rgb-hsl */
	--base-color: oklch(0.49 0.192 283);
	--color-accent: var(--base-color);
	--color-neutral: oklch(from var(--base-color) 0.6453 0.0165 h);

	/* Lightness component of LCH */

	/* Light mode following the curve: */
	/* -0.5x^2 + x + 99 */
	--ll1: 99.5%;
	--ll2: 99%;
	--ll3: 97.5%;
	--ll4: 95%;
	--ll5: 91.5%;
	--ll6: 87%;
	--ll7: 81.5%;
	--ll8: 75%;
	--ll11: 49.5%;
	--ll12: 39%;

	/* Dark mode following the curve: */
	/* 0.5x^2 + x + 16 */
	--ld1: 17.5%;
	--ld2: 20%;
	--ld3: 23.5%;
	--ld4: 28%;
	--ld5: 33.5%;
	--ld6: 40%;
	--ld7: 47.5%;
	--ld8: 56%;
	--ld11: 87.5%;
	--ld12: 100%;

	/* Chroma component of LCH */
	--max-c: 0.25;
	--cf1: calc(0.013 / var(--max-c));
	--cf2: calc(0.026 / var(--max-c));
	--cf3: calc(0.09 / var(--max-c));
	--cf4: calc(0.144 / var(--max-c));
	--cf5: calc(0.16 / var(--max-c));
	--cf6: calc(0.17 / var(--max-c));
	--cf7: calc(0.18 / var(--max-c));
	--cf8: calc(0.22 / var(--max-c));
	--cf11: calc(0.15 / var(--max-c));
	--cf12: calc(0.09 / var(--max-c));

	/* Hover constants */
	--hover-lightness-delta: -0.075;
	--hover-chroma-delta: 0.015;

	/* Active constants */
	--active-lightness-delta: -0.125;
	--active-chroma-delta: 0.01;

	/* Text lightness threshold */
	--lightness-threshold: 0.75;
	--low-l-fg: 0.3;
	--high-l-fg: 0.99;
}

/* Variables */
* {
	/* App background */
	--color-bg-app: light-dark(
		oklch(from var(--base-color) var(--ll1) calc(c * var(--cf1)) h),
		oklch(from var(--base-color) var(--ld1) calc(c * var(--cf1)) h)
	);

	/* Subtle background */
	--color-bg-subtle: light-dark(
		oklch(from var(--base-color) var(--ll2) calc(c * var(--cf2)) h),
		oklch(from var(--base-color) var(--ld2) calc(c * var(--cf2)) h)
	);

	/* Element background */
	--color-bg: light-dark(
		oklch(from var(--base-color) var(--ll3) calc(c * var(--cf3)) h),
		oklch(from var(--base-color) var(--ld3) calc(c * var(--cf3)) h)
	);

	/* Hovered element background */
	--color-bg-hover: light-dark(
		oklch(from var(--base-color) var(--ll4) calc(c * var(--cf4)) h),
		oklch(from var(--base-color) var(--ld4) calc(c * var(--cf4)) h)
	);

	/* Active / selected element background */
	--color-bg-active: light-dark(
		oklch(from var(--base-color) var(--ll5) calc(c * var(--cf5)) h),
		oklch(from var(--base-color) var(--ld5) calc(c * var(--cf5)) h)
	);

	/* Subtle borders and separators */
	--color-border-subtle: light-dark(
		oklch(from var(--base-color) var(--ll6) calc(c * var(--cf6)) h),
		oklch(from var(--base-color) var(--ld6) calc(c * var(--cf6)) h)
	);

	/* Borders and separators */
	--color-border: light-dark(
		oklch(from var(--base-color) var(--ll7) calc(c * var(--cf7)) h),
		oklch(from var(--base-color) var(--ld7) calc(c * var(--cf7)) h)
	);

	/* Focus border */
	--color-border-focus: light-dark(
		oklch(from var(--base-color) var(--ll8) calc(c * var(--cf8)) h),
		oklch(from var(--base-color) var(--ld8) calc(c * var(--cf8)) h)
	);

	/* Solid backgrounds */
	--color-bg-solid: var(--base-color);

	/* Hovered solid backgrounds */
	--color-bg-solid-hover: oklch(
		from var(--base-color) calc(l + var(--hover-lightness-delta))
			calc(c + var(--hover-chroma-delta)) h
	);

	/* Active solid backgrounds */
	--color-bg-solid-active: oklch(
		from var(--base-color) calc(l + var(--active-lightness-delta))
			calc(c + var(--active-chroma-delta)) h
	);

	/* Low-contrast texts */
	--color-fg-low: light-dark(
		oklch(from var(--base-color) var(--ll11) calc(c * var(--cf11)) h),
		oklch(from var(--base-color) var(--ld11) calc(c * var(--cf11)) h)
	);

	/* High-contrast texts */
	--color-fg-high: light-dark(
		oklch(from var(--base-color) var(--ll12) calc(c * var(--cf12)) h),
		oklch(from var(--base-color) var(--ld12) calc(c * var(--cf12)) h)
	);

	/* Text on solid backgrounds */
	/* Conditional based on lightness (if < threshold, light color else dark color) */
	--color-fg-solid: oklch(
		from var(--color-bg-solid)
			calc(
				var(--high-l-fg) - (var(--high-l-fg) - var(--low-l-fg)) *
					round(l - (var(--lightness-threshold) - 0.5))
			)
			calc(c * var(--cf12)) h
	);
}

.success {
	--base-color: var(--color-success);
}

.warning {
	--base-color: var(--color-warning);
}

.danger {
	--base-color: var(--color-danger);
}

.neutral {
	--base-color: var(--color-neutral);
}
